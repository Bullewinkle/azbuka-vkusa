try{var retailrocket=function(e){return e=e||{},e.modules=e.modules||{ns:e,window:window,document:document},e.setModule=function(t,r,n){for(var i=0;i<r.length;i++)r[i]=e.modules[r[i]];var a=n.apply(n,r);e.modules[t]=a,a.useNs&&(e[t]=a)},e}(retailrocket);retailrocket.setModule("cookies",[],function(){function e(e,n,i){for(var a=location.host,o=a.split("."),s=2;s<=o.length;s++){var d=o.slice(o.length-s).join(".");if(r(e,n,i,"/",d),t(e)==n)break}}var t=function(e){var t,r,n,i=document.cookie.split(";");for(t=0;t<i.length;t++)if(r=i[t].substr(0,i[t].indexOf("=")),n=i[t].substr(i[t].indexOf("=")+1),r=r.replace(/^\s+|\s+$/g,""),r==e)return unescape(n);return null},r=function(e,t,r,n,i){var a=new Date;a.setSeconds(a.getSeconds()+r);var o=escape(t||"")+(null==r?"":"; expires="+a.toUTCString())+(";path="+(n||"/"))+(i?";domain="+i:"");document.cookie=e+"="+o};return{get:t,set:r,setOnRoot:e,useNs:!0}}),retailrocket.setModule("segmentator",["cookies"],function(e){function t(e,t){return Math.floor(Math.random()*(t-e+1))+e}function r(r,n){n=n||{};var i=e.get(a);return i&&i.split(":")[0]==r||(i=r+":"+t(1,r)),e.set(a,i,o.daysToSecond(n.expireInDay||60),"/"),i.split(":")[1]}function n(e,t){var r=[],n=[];for(var a in e)r.push(a),n.push(e[a]);var o=i(n,t);return r[o-1]}function i(e,t){for(var n=0,i=0;i<e.length;i++)n+=e[i];for(var a=r(n,t),o=0,s=1;s<=e.length;s++){for(var d=e[s-1],i=1;d>=i;i++)if(o+i==a)return s;o+=d}}var a="rr-VisitorSegment",o={daysToSecond:function(e){return 24*e*60*60}};return{getVisitorSegment:r,getPseudoSegment:i,getPseudoNamedSegment:n,useNs:!0}}),retailrocket.setModule("jsonp",["document","window"],function(e,t){function r(t){var r=e.createElement("script");r.type="text/javascript",r.src=t,r.async=!0,e.getElementsByTagName("script")[0].parentElement.appendChild(r)}var n=+new Date,i=function(e,i){var a="RetailRocketCallbacks_"+ ++n,o=e+"&format=json&callback="+a;t[a]=function(e){i(e);try{delete t[a]}catch(r){}t[a]=null},r(o)};return{run:i,useNs:!0}}),retailrocket.setModule("cors",[],function(){function e(e,t){t=t||[];for(var r=0;r<t.length;++r){var n=t[r];e.setRequestHeader(n.name,n.value)}}function t(t,r,n,i,a,o){var s;XMLHttpRequest?(s=new XMLHttpRequest,"withCredentials"in s&&(s.open(r,t,!0),e(s,n),s.onerror=o,s.onreadystatechange=function(){4===s.readyState&&(s.status>=200&&s.status<400?a(s.responseText):o(new Error("Response returned with non-OK status")))},s.send(i))):XDomainRequest?((n||n.length>0)&&o(new Error("custom headers not supported")),s=new XDomainRequest,s.open(r,t),s.onerror=o,s.onload=function(){a(s.responseText)},s.send(i)):o(new Error("CORS not supported"))}return{make:t,useNs:!0}}),retailrocket.setModule("visitor",["jsonp"],function(e){function t(t,r,n){var i="//api.retailrocket.ru/api/1.0/visitor/"+r+"?partnerId="+t;e.run(i,n)}return{get:t,useNs:!0}}),retailrocket.setModule("api",["cookies","document","window"],function(e,t,r){function n(){return e.get("rcuid")}function i(){var t=e.get("rrpvid")||Math.floor(Math.random()*Math.pow(10,15)).toString();return e.setOnRoot("rrpvid",t,31536e3),t}function a(){return r.rrPartnerId}function o(e){(r.rrApiOnReady=r.rrApiOnReady||[]).push(function(){e(rrApi)})}function s(e){return"//cdn.retailrocket.ru/api"+e}return{getSessionId:n,getPartnerVisitorId:i,getPartnerId:a,pushTrackingCall:o,baseUrl:"//api.retailrocket.ru/api",cdnUrl:s,useNs:!0}}),retailrocket.setModule("products",["cors","api"],function(e,t){function r(e){return"//api.retailrocket.ru/api/1.0/partner/"+e+"/products/"}function n(t,n,i,a,o){e.make(r(t)+n+"?"+(o?"&signature="+o:"")+(i?"&stockId="+i:""),"POST",[{name:"Content-type",value:"application/json"}],a,function(){},function(){})}function i(e,t,r){var i=JSON.parse(t),a=i.id,o=i.stockId;n(e,a,o,t,r)}function a(e,t){var r=t.id,i=t.stockId;n(e,r,i,JSON.stringify(t))}function o(e,r){t.pushTrackingCall(function(){return e.categoryPath=e.categoryPath||e.category,r?i(t.getPartnerId(),e,r):a(t.getPartnerId(),e)})}return{post:o,useNs:!0}}),retailrocket.setModule("categories",["cors","api"],function(e,t){function r(e){return"//api.retailrocket.ru/api/1.0/partner/"+e+"/categories/"}function n(e,t,n,i){var a=r(e)+(t||"")+"?";return n&&(a+="&categoryPath="+encodeURIComponent(n)),i&&(a+="&signature="+i),a}function i(t,r,i,a,o){e.make(n(t,r,i,o),"POST",[{name:"Content-type",value:"application/json"}],a,function(){},function(){})}function a(e,t,r){var n=JSON.parse(t),a=n.id,o=n.categoryPath;i(e,a,o,JSON.stringify(t),r)}function o(e,t){var r=t.id,n=t.categoryPath;i(e,r,n,JSON.stringify(t))}function s(e,r){t.pushTrackingCall(function(){return r?a(t.getPartnerId(),e,r):o(t.getPartnerId(),e)})}return{post:s,useNs:!0}}),retailrocket.setModule("utils",["ns","document"],function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}function n(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]}function i(e){var t=[];return e.forEach(function(e){t.indexOf(e)<0&&t.push(e)}),t}function a(e){var r=t.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e),t.getElementsByTagName("head")[0].appendChild(r)}function o(){var e=[],t={};return t.subscribe=function(t){e.push(t)},t.publish=function(){e.forEach(function(e){try{e.apply(t,arguments||[])}catch(r){(window.console||{log:function(){}}).log(r)}})},t}function s(e){return document.querySelector(e)}function d(e){return document.querySelectorAll(e)}function c(e,t){[].forEach.call(document.querySelectorAll(e),t)}function u(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1}function l(e,t){for(var r=e.parentElement;r&&!u(r,t);)r=r.parentElement;return r}var p=function(e){var t="";if(e)for(var r in e)null!==e[r]&&void 0!==e[r]&&(t+="&"+r+"="+encodeURIComponent(e[r]));return t},m=function(e,t){var r={};for(var n in e)r[(t||"")+n]=e[n];return r},g=function(e){return document.querySelectorAll?document.querySelectorAll("."+e):document.getElementsByClassName(e)},f=function(e){var t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return t.test(e)};return"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,t){void 0===t&&(t=0),0>t&&(t+=this.length),0>t&&(t=0);for(var r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1}),"filter"in Array.prototype||(Array.prototype.filter=function(e,t){for(var r,n=[],i=0,a=this.length;a>i;i++)i in this&&e.call(t,r=this[i],i,this)&&n.push(r);return n}),"forEach"in Array.prototype||(Array.prototype.forEach=function(e,t){for(var r=0,n=this.length;n>r;r++)r in this&&e.call(t,this[r],r,this)}),"map"in Array.prototype||(Array.prototype.map=function(e,t){for(var r=new Array(this.length),n=0,i=this.length;i>n;n++)n in this&&(r[n]=e.call(t,this[n],n,this));return r}),{objToQueryString:p,plainCopy:m,getAllKeys:r,getElementsByClassName:g,isValidEmail:f,extend:n,uniq:i,registerCss:a,createEventProperty:o,$one:s,$all:d,$forall:c,hasClass:u,getContainerByClass:l}}),retailrocket.setModule("recommendation",["utils","jsonp","api"],function(e,t,r){function n(n,i,a,o){var s=e.plainCopy(a||{});s.session=s.session||r.getSessionId(),s.pvid=r.getPartnerVisitorId();var d="//api.retailrocket.ru/api/2.0/recommendation/"+(a.algorithmType?a.algorithmType+"/":"")+i+"/"+n+"/?"+e.objToQueryString(s);t.run(d,o)}return{forProducts:function(t,r,i,a,o){var s=e.plainCopy(a||{});s.itemIds=r.join(","),n(t,i,s,o)},forCategories:function(t,r,i,a,o){var s=e.plainCopy(a||{});s.categoryIds="",s.categoryPaths="";for(var d=0;d<r.length;++d)parseInt(r[d])||0===parseInt(r[d])?s.categoryIds+=(s.categoryIds?",":"")+r[d]:s.categoryPaths+=(s.categoryPaths?",":"")+r[d];n(t,i,s,o)},forPerson:function(t,i,a,o,s){var d=e.plainCopy(o||{});d.session=i,d.partnerUserId=a,r.pushTrackingCall(function(){d.session=r.getSessionId(),n(t,"personal",d,s)})},forVisitor:function(t,r,i,a){var o=e.plainCopy(i||{});o.session=r,n(t,"visitorinterest",o,a)},forSearch:function(t,r,i,a){var o=e.plainCopy(i||{});o.phrase=r,n(t,"Search",o,a)},forVisitorCategoryInterest:function(t,r,i,a,o){var s=e.plainCopy(a||{});s.session=r,s.algorithmType="VisitorCategoryInterest",n(t,i,s,o)},useNs:!0}}),retailrocket.setModule("items",["jsonp"],function(e){function t(e){return"//api.retailrocket.ru/api/1.0/partner/"+e+"/items/"}function r(r,n,i){var a=t(r)+"?itemsIds="+n.join(",");e.run(a,i)}return{get:r,useNs:!0}});var NO_JQUERY={};!function(e,t,r){if(!("console"in e)){var n=e.console={};n.log=n.warn=n.error=n.debug=function(){}}t===NO_JQUERY&&(t={fn:{},extend:function(){for(var e=arguments[0],t=1,r=arguments.length;r>t;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}}),t.fn.pm=function(){return console.log("usage: \nto send:    $.pm(options)\nto receive: $.pm.bind(type, fn, [origin])"),this},t.pm=e.pm=function(e){i.send(e)},t.pm.bind=e.pm.bind=function(e,t,r,n,a){i.bind(e,t,r,n,a===!0)},t.pm.unbind=e.pm.unbind=function(e,t){i.unbind(e,t)},t.pm.origin=e.pm.origin=null,t.pm.poll=e.pm.poll=200;var i={send:function(e){var r=t.extend({},i.defaults,e),n=r.target;if(r.target&&r.type){var a={data:r.data,type:r.type};r.success&&(a.callback=i._callback(r.success)),r.error&&(a.errback=i._callback(r.error)),"postMessage"in n&&!r.hash?(i._bind(),n.postMessage(JSON.stringify(a),r.origin||"*")):(i.hash._bind(),i.hash.send(r,a))}},bind:function(e,t,r,n,a){i._replyBind(e,t,r,n,a)},_replyBind:function(r,n,a,o,s){"postMessage"in e&&!o?i._bind():i.hash._bind();var d=i.data("listeners.postmessage");d||(d={},i.data("listeners.postmessage",d));var c=d[r];c||(c=[],d[r]=c),c.push({fn:n,callback:s,origin:a||t.pm.origin})},unbind:function(e,t){var r=i.data("listeners.postmessage");if(r)if(e)if(t){var n=r[e];if(n){for(var a=[],o=0,s=n.length;s>o;o++){var d=n[o];d.fn!==t&&a.push(d)}r[e]=a}}else delete r[e];else for(var o in r)delete r[o]},data:function(e,t){return t===r?i._data[e]:(i._data[e]=t,t)},_data:{},_CHARS:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),_random:function(){for(var e=[],t=0;32>t;t++)e[t]=i._CHARS[0|32*Math.random()];return e.join("")},_callback:function(e){var t=i.data("callbacks.postmessage");t||(t={},i.data("callbacks.postmessage",t));var r=i._random();return t[r]=e,r},_bind:function(){i.data("listening.postmessage")||(e.addEventListener?e.addEventListener("message",i._dispatch,!1):e.attachEvent&&e.attachEvent("onmessage",i._dispatch),i.data("listening.postmessage",1))},_dispatch:function(e){function t(t){r.callback&&i.send({target:e.source,data:t,type:r.callback})}try{var r=JSON.parse(e.data)}catch(n){return}if(r.type){var a=i.data("callbacks.postmessage")||{},o=a[r.type];if(o)o(r.data);else for(var s=i.data("listeners.postmessage")||{},d=s[r.type]||[],c=0,u=d.length;u>c;c++){var l=d[c];if(l.origin&&"*"!==l.origin&&e.origin!==l.origin){if(r.errback){var p={message:"postmessage origin mismatch",origin:[e.origin,l.origin]};i.send({target:e.source,data:p,type:r.errback})}}else try{l.callback?l.fn(r.data,t,e):t(l.fn(r.data,e))}catch(n){if(!r.errback)throw n;i.send({target:e.source,data:n,type:r.errback})}}}}};i.hash={send:function(t,r){var n=t.target,a=t.url;if(a){a=i.hash._url(a);var o,s=i.hash._url(e.location.href);if(e==n.parent)o="parent";else try{for(var d=0,c=parent.frames.length;c>d;d++){var u=parent.frames[d];if(u==e){o=d;break}}}catch(l){o=e.name}if(null!=o){var p={"x-requested-with":"postmessage",source:{name:o,url:s},postmessage:r},m="#x-postmessage-id="+i._random();n.location=a+m+encodeURIComponent(JSON.stringify(p))}}},_regex:/^\#x\-postmessage\-id\=(\w{32})/,_regex_len:"#x-postmessage-id=".length+32,_bind:function(){i.data("polling.postmessage")||(setInterval(function(){var t=""+e.location.hash,r=i.hash._regex.exec(t);if(r){var n=r[1];i.hash._last!==n&&(i.hash._last=n,i.hash._dispatch(t.substring(i.hash._regex_len)))}},t.pm.poll||200),i.data("polling.postmessage",1))},_dispatch:function(t){function r(e){a.callback&&i.send({target:d,data:e,type:a.callback,hash:!0,url:t.source.url})}if(t){try{if(t=JSON.parse(decodeURIComponent(t)),!("postmessage"===t["x-requested-with"]&&t.source&&null!=t.source.name&&t.source.url&&t.postmessage))return}catch(n){return}var a=t.postmessage,o=i.data("callbacks.postmessage")||{},s=o[a.type];if(s)s(a.data);else{var d;d="parent"===t.source.name?e.parent:e.frames[t.source.name];for(var c=i.data("listeners.postmessage")||{},u=c[a.type]||[],l=0,p=u.length;p>l;l++){var m=u[l];if(m.origin){var g=/https?\:\/\/[^\/]*/.exec(t.source.url)[0];if("*"!==m.origin&&g!==m.origin){if(a.errback){var f={message:"postmessage origin mismatch",origin:[g,m.origin]};i.send({target:d,data:f,type:a.errback,hash:!0,url:t.source.url})}continue}}try{m.callback?m.fn(a.data,r):r(m.fn(a.data))}catch(n){if(!a.errback)throw n;i.send({target:d,data:n,type:a.errback,hash:!0,url:t.source.url})}}}}},_url:function(e){return(""+e).replace(/#.*$/,"")}},t.extend(i,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:!1}})}(this,"undefined"==typeof jQuery?NO_JQUERY:jQuery),"JSON"in window&&window.JSON||(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,n,i,a,o,s=gap,d=t[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),"function"==typeof rep&&(d=rep.call(t,e,d)),typeof d){case"string":return quote(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(d)){for(a=d.length,r=0;a>r;r+=1)o[r]=str(r,d)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(a=rep.length,r=0;a>r;r+=1)n=rep[r],"string"==typeof n&&(i=str(n,d),i&&o.push(quote(n)+(gap?": ":":")+i));else for(n in d)Object.hasOwnProperty.call(d,n)&&(i=str(n,d),i&&o.push(quote(n)+(gap?": ":":")+i));return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;r>n;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var r,n,i=e[t];if(i&&"object"==typeof i)for(r in i)Object.hasOwnProperty.call(i,r)&&(n=walk(i,r),void 0!==n?i[r]=n:delete i[r]);return reviver.call(e,t,i)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),window.rrApiOnReady=window.rrApiOnReady||[];var rrLibrary=window.rrLibrary=function(){function e(){return document.referrer.indexOf("//metrika.yandex.ru/stat/visor/player/")>-1||document.location.href.indexOf(".mtproxy.yandex.net")>-1}function t(){var e=navigator.cookieEnabled?!0:!1;return"undefined"!=typeof navigator.cookieEnabled||e||(document.cookie="testcookie",e=-1!=document.cookie.indexOf("testcookie")?!0:!1),e}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var r={lastPartnerUserIdCookieName:"rrlpuid",lastAddedBasketCookiName:"rrbasket",lastViewedCookiName:"rrviewed",mailTrackingIdCookieName:"rrmailid",utmSourceCookieName:"rrutmsource",robotFlagCookieName:"rrrbt"};return r.jsRequest=function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,t.async=!0,document.getElementsByTagName("head")[0].appendChild(t)},r.imgRequest=function(e){var t=new Image(1,1);t.src=e,document.body.appendChild(t)},r.iframeRequest=function(e){var t=document.createElement("IFRAME");t.setAttribute("src",e),t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.left="-99999px",document.body.appendChild(t)},r.plainCopy=function(e,t){var r={};for(var n in e)r[(t||"")+n]=e[n];return r},r.plainExtend=function(e,t){for(var r in t)e[r]=t[r];return e},r.getCookie=function(e){var t,r,n,i=document.cookie.split(";");for(t=0;t<i.length;t++)if(r=i[t].substr(0,i[t].indexOf("=")),n=i[t].substr(i[t].indexOf("=")+1),r=r.replace(/^\s+|\s+$/g,""),r==e)return unescape(n);return null},r.daysToSecond=function(e){return 24*e*60*60},r.setCookie=function(e,t,r,n,i){var a=new Date;a.setSeconds(a.getSeconds()+r);var o=escape(t||"")+(null==r?"":"; expires="+a.toUTCString())+(";path="+(n||"/"))+(i?";domain="+i:"");document.cookie=e+"="+o},r.objToQueryString=function(e){var t="";if(e)for(var r in e)null!==e[r]&&void 0!==e[r]&&(t+="&"+r+"="+encodeURIComponent(e[r]));return t},r.urlParse=function(e){var t=document.createElement("a");return t.href=e,t},r.getQueryParametr=function(e){for(var t=window.location.search.substring(1),r=t.split("&"),n=0;n<r.length;n++){var i=r[n].split("=");if(decodeURIComponent(i[0])==e)return decodeURIComponent(i[1]||"")}return null},r.jsonpCall=function(e,t){r.jsRequest(e+r.objToQueryString(t)+"&"+(new Date).getTime())},r.prototypeSafeJsonStringify=function(e){var t=Array.prototype.toJSON;delete Array.prototype.toJSON;var r=JSON.stringify(e);return t&&(Array.prototype.toJSON=t),r},r.isRobot=e(),r.areCookiesEnabled=t(),r.setCookie(r.robotFlagCookieName,r.isRobot||"true"===r.getCookie(r.robotFlagCookieName),1728e4),r.executeSubscribers=function(e,t){if(0!=e.length){for(var n=r.EventProperty(),i=0;i<e.length;i++)try{e[i].apply(n,t||[])}catch(a){(window.console||{log:function(){}}).log(a)}n()}},r.EventProperty=function(){var e=[],t=function(){r.executeSubscribers(e,arguments)};return t.subscribe=function(t){e.push(t)},t},r.parseStringableProperty=function(e,t,r){return"string"==typeof e?e:typeof e==typeof{}?e[t]:r},r}();!function(e){function t(t){try{localStorage.setItem(o,e.prototypeSafeJsonStringify(t))}catch(r){s=t}}function r(){try{return JSON.parse(localStorage.getItem(o))||[]}catch(e){return s}}function n(e,n){var i=r();i.push({ts:(new Date).getTime(),ev:e,dt:n}),t(i)}function i(e){var n=r(),i=n.filter(function(t){return t.ts>e});t(i)}function a(e,t){var n=r();return e&&(n=n.filter(function(t){return e.indexOf(t.ev)>=0})),t&&(n=n.filter(function(e){return e.ts>t})),n}var o="retailRocketEvents",s=[];"filter"in Array.prototype||(Array.prototype.filter=function(e,t){for(var r,n=[],i=0,a=this.length;a>i;i++)i in this&&e.call(t,r=this[i],i,this)&&n.push(r);return n});var d=864e5;i((new Date).getTime()-d),e.getLocalEvents=r,e.registerLocalEvent=n,e.findLocalEvents=a}(rrLibrary),function(e,t){function r(r){return{callback:r||"",format:"json",partnerUserId:e.getCookie(e.lastPartnerUserIdCookieName)||"",pvid:t.getPartnerVisitorId(),partnerTestSegment:window.rrTestSegment,email:window.rrUserEmail}}function n(t,n,i,o){var s=a+"/event/"+t+"/"+n+"/jsonp?",d=r(o);e.plainExtend(d,i),e.jsonpCall(s,d)}function i(t,n,i,o,s){var d=a+"/partner/"+n+"/subscribe/"+t+"/?",c=r(s);o.email=i,e.plainExtend(c,o),e.jsonpCall(d,c)}var a="//api.retailrocket.ru/api/1.0";e.sendPartnerEvent=n,e.subscribeToEvent=i,e.subscribeEmail=new function(){var t=this;t.permanentEventParams={format:"json"},this.send=function(n,i,o,s,d){var c=a+"/partner/"+i+"/subscribe/"+n+"/?",u=r(d);e.plainExtend(u,t.permanentEventParams),u.email=s,u.itemId=o,e.jsonpCall(c,u)}},e.trackEvent=new function(){var t=this;t.permanentEventParams={},this.send=function(n,i,o,s,d){var c=a+"/Event/"+n+"/"+i+(o?"/"+o:"")+"/jsonp?",u=r(d);e.plainExtend(u,t.permanentEventParams),e.plainExtend(u,e.plainCopy(s)),e.jsonpCall(c,u)}}}(rrLibrary,retailrocket.api),function(e){window.rrApi=window.rcApi=function(){var t={initialized:!1,pageView:e.EventProperty(),pageViewCompleted:e.EventProperty(),view:e.EventProperty(),viewCompleted:e.EventProperty(),groupView:e.EventProperty(),addToBasket:e.EventProperty(),addToBasketCompleted:e.EventProperty(),removeFromBasket:e.EventProperty(),removeFromBasketCompleted:e.EventProperty(),categoryView:e.EventProperty(),categoryViewCompleted:e.EventProperty(),order:e.EventProperty(),orderCompleted:e.EventProperty(),recomAddToCart:e.EventProperty(),recomAddToCartCompleted:e.EventProperty(),recomAddToBasket:e.EventProperty(),recomAddToBasketCompleted:e.EventProperty(),recomTrack:e.EventProperty(),recomTrackCompleted:e.EventProperty(),viewServicePage:e.EventProperty(),viewServicePageCompleted:e.EventProperty(),recomMouseDown:e.EventProperty(),setEmail:e.EventProperty(),setEmailCompleted:e.EventProperty(),clearEmail:e.EventProperty(),clearEmailCompleted:e.EventProperty(),subscribeOnItemBackInStock:e.EventProperty(),welcomeSequence:e.EventProperty(),setKeywords:e.EventProperty(),search:e.EventProperty(),mailRequest:e.EventProperty(),mailRequestFormView:e.EventProperty(),subscribeOnPriceDrop:e.EventProperty(),_initialize:e.EventProperty(),_empty:function(){}};return t._initialize.subscribe(function(t){e.setCookie("rcuid",t.RrSessionId,e.daysToSecond(365)),e.setCookie("rrpusid",t.RrSessionId,e.daysToSecond(365)),this.subscribe(function(){(window.rrAsyncInit||window.rcAsyncInit||function(){})(),e.executeSubscribers(window.rrApiOnReady||[],[t]),window.rrApiOnReady={push:function(r){e.executeSubscribers([r],[t])}}})}),t}()}(rrLibrary),function(e,t){function r(t){for(var r=0,n=0;n<t.length;++n)r+=t[n].part;for(var i=e.getPartnerVisitorId()%r,a=0;a<t.length;a++){var o=t[a].part;if(o>=i)return t[a].label;i-=o}return null}var n="";"527a338aec92e6106859030b"==e.getPartnerId()&&(n="ab_20151007_esky_"+r([{label:"regular",part:50},{label:"ItemsInCategory",part:50}])),t.trackEvent.permanentEventParams.abtest=n}(retailrocket.api,rrLibrary),function(e,t,r){if(!e.isRobot&&e.areCookiesEnabled){var n,i=null,a="rr-RecomAddToCartItemId",o="rr-addToBasketItemId",s="rr-viewItemId",d="rr-subFormLastView",c={setEmail:"rr_setemail"},u=function(i,a){n=i,setTimeout(function(){var n=e.plainCopy(a||{},"d.");n.email=i,n.basket=t.get(e.lastAddedBasketCookiName),n.viewed=t.get(e.lastViewedCookiName),t.setOnRoot(e.lastAddedBasketCookiName,null,-1),t.setOnRoot(e.lastViewedCookiName,null,-1),e.trackEvent.send("setEmail",r.getPartnerId(),null,n,"rrApi.setEmailCompleted")},100)};rrApi._initialize.subscribe(function(l){function p(t,n){for(var a=[].concat(n),o={session:i.RrSessionId},s=0;s<a.length;s++)o["items["+s+"].ItemId"]=a[s].id,o["items["+s+"].Price"]=a[s].price;e.subscribeToEvent("pricedrop",r.getPartnerId(),t,o)}if(i=l,l){e.trackEvent.permanentEventParams.session=i.RrSessionId,e.subscribeEmail.permanentEventParams.session=i.RrSessionId;var m=e.getQueryParametr(c.setEmail);null!=m&&u(m),rrApi.pageView.subscribe(function(){var n={};n.referrer=document.referrer,n.session=i.RrSessionId,n.jsFileName="api.js",n.keywords=window.rrSearchPhrase,e.trackEvent.send("pageView",r.getPartnerId(),null,n,"rrApi.pageViewCompleted");var s=t.get(a);null!=s&&rrApi.recomAddToCart(s);var d=t.get(o);null!=d&&rrApi.addToBasket(d,{})}),rrApi.view.subscribe(function(n,a){var o=e.plainCopy(a);o.referrer=document.referrer,o.session=i.RrSessionId,t.setOnRoot(s,n,600);var d=t.get("rr-RecomItemId");d&&(o.recomItemId=d,o.alg=t.get("rr-Alg"),o.methodName=t.get("rr-MethodName")),e.trackEvent.send("view",r.getPartnerId(),n,o,"rrApi.viewCompleted")}),rrApi.groupView.subscribe(function(e,t){for(var r=0;r<e.length;r++)rrApi.view(e[r],t)}),rrApi.addToBasket.subscribe(function(n,a){var s=e.plainCopy(a);s.session=i.RrSessionId,t.setOnRoot(o,n,30),e.trackEvent.send("addToBasket",r.getPartnerId(),n,s,"rrApi.addToBasketCompleted")}),rrApi.addToBasketCompleted.subscribe(function(){t.setOnRoot(o,null,-1)}),rrApi.removeFromBasket.subscribe(function(t,n){var a=e.plainCopy(n);a.session=i.RrSessionId,e.trackEvent.send("removefrombasket",r.getPartnerId(),t,a,"rrApi.removeFromBasketCompleted")}),rrApi.categoryView.subscribe(function(t,n){var a=t,o=e.plainCopy(n);o.session=i.RrSessionId,parseInt(t)!=t&&(a=null,o.categoryPath=t),e.trackEvent.send("categoryView",r.getPartnerId(),a,o,"rrApi.categoryViewCompleted")}),rrApi.viewServicePage.subscribe(function(n){var a=e.plainCopy(n);a.session=i.RrSessionId;var o=t.get(s);e.trackEvent.send("viewServicePage",r.getPartnerId(),o,a,"rrApi.viewServicePageCompleted")}),rrApi.viewServicePageCompleted.subscribe(function(){t.setOnRoot(s,null,-1)}),rrApi.recomAddToCart.subscribe(function(n,o){var s=e.plainCopy(o);s.session=i.RrSessionId,t.setOnRoot(a,n,30),e.trackEvent.send("recomAddToBasket",r.getPartnerId(),n,s,"rrApi.recomAddToCartCompleted")}),rrApi.recomAddToCartCompleted.subscribe(function(){t.setOnRoot(a,null,-1)}),rrApi.recomMouseDown.subscribe(function(r,n){var i=e.parseStringableProperty(n,"methodName","");t.set("rr-RecomItemId",r,60,"/"),t.set("rr-MethodName",i,60,"/")}),rrApi.recomTrack.subscribe(function(t,n,a,o){var s=e.plainCopy(o);s.referrer=document.referrer,s.session=i.RrSessionId,s.methodName=t,s.recomms=a.join(","),s.to=n,e.trackEvent.send("recomTrack",r.getPartnerId(),null,s,"rrApi.recomTrackCompleted")}),rrApi.order.subscribe(function(a){function o(e){for(var t={},r=0;r<e.length;++r){var n=e[r],i=n[n.id.toString()]||{qnt:0,price:0};t[n.id.toString()]={id:n.id,qnt:i.qnt+(parseFloat(n.qnt)||1),price:i.price+(parseFloat(n.price)||0)}}return t}var s=o(a.items),d=Object.keys(s).length,c=t.get(e.mailTrackingIdCookieName),u=0;for(var l in s){u++;var p=s[l],m=u==d,g=e.getLastSuggestParams(p.id);e.trackEvent.send("order",r.getPartnerId(),p.id,{session:i.RrSessionId,qnt:p.qnt,price:p.price,transaction:a.transaction,email:n,suggester:g.suggester,suggestMethod:g.suggestMethod,mailTrackingId:c},m?"rrApi.orderCompleted":"rrApi._empty")}}),rrApi.setEmail.subscribe(u),rrApi.clearEmail.subscribe(function(){e.trackEvent.send("clearEmail",r.getPartnerId(),null,{},"rrApi.clearEmailCompleted")}),rrApi.subscribeOnItemBackInStock.subscribe(function(t,n){e.subscribeEmail.send("backinstock",r.getPartnerId(),n,t,"rrApi._empty")}),rrApi.welcomeSequence.subscribe(function(t){e.subscribeEmail.send("welcomesequence",r.getPartnerId(),null,t,"rrApi._empty")}),rrApi.search.subscribe(function(t,a){var o=e.plainCopy(a);o.session=i.RrSessionId,o.email=n,o.searchPhrase=t,e.trackEvent.send("search",r.getPartnerId(),null,o)}),rrApi.mailRequest.subscribe(function(t,n,i,a,o,s){var d={email:t,session:n,requestType:i,productIds:a.join(","),isAgreedToReceiveMarketingMail:o};e.plainExtend(d,e.plainCopy(s,"d.")),e.sendPartnerEvent("mailrequest",r.getPartnerId(),d)}),rrApi.mailRequestFormView.subscribe(function(n){n=n||{};var a={session:i.RrSessionId,isFirstView:null==t.get(d),requestType:n.requestType};e.trackEvent.send("viewsubscriptionform",r.getPartnerId(),null,a),t.set(d,!0,3600,"/")}),rrApi.subscribeOnPriceDrop.subscribe(p)}})}}(rrLibrary,retailrocket.cookies,retailrocket.api),function(e){function t(t,r){var n=e.findLocalEvents(r).filter(function(e){return e.dt.id==t}).sort(function(e,t){return t.ts-e.ts});return n}function r(e){var r=t(e,["recomMouseDown","recomAddToCart"])[0]||{dt:{}};return{productId:e,suggester:r.dt.sgr,suggestMethod:r.dt.met}}function n(e){var r=t(e,["recomByEmail"])[0]||{dt:{}};return{productId:e,mailTrackingId:r.dt.mtrid}}function i(e,t){var n=r(e.id),i={id:e.id,qnt:e.qnt,transaction:t,price:e.price,sgr:n.suggester,met:n.suggestMethod};return i}rrApi.pageView.subscribe(function(){var t=e.getQueryParametr("rr_mailid"),r=e.getQueryParametr("rr_productId");t&&e.registerLocalEvent("recomByEmail",{id:r,mtrid:t})}),rrApi.view.subscribe(function(t,r){e.registerLocalEvent("view",{id:t})}),rrApi.addToBasket.subscribe(function(t,r){e.registerLocalEvent("addToBasket",{id:t})}),rrApi.removeFromBasket.subscribe(function(t,r){e.registerLocalEvent("removeFromBasket",{id:t})}),rrApi.recomMouseDown.subscribe(function(t,r){var n=e.parseStringableProperty(r,"methodName",""),i=typeof r==typeof{}?r.suggester:void 0;e.registerLocalEvent("recomMouseDown",{id:t,sgr:i,met:n})}),rrApi.recomAddToCart.subscribe(function(t,r){r=r||{},e.registerLocalEvent("recomAddToCart",{id:t,sgr:r.suggester,met:r.suggestMethod})}),rrApi.order.subscribe(function(t){for(var r=0;r<t.items.length;++r){var n=i(t.items[r],t.transaction);e.registerLocalEvent("order",n)}}),rrApi.search.subscribe(function(t,r){e.registerLocalEvent("search",t)}),rrApi.mailRequest.subscribe(function(t,r,n,i,a,o){e.registerLocalEvent("mailrequest",{})}),rrApi.mailRequestFormView.subscribe(function(t){e.registerLocalEvent("mailrequestFormView",t)}),e.getLastSuggestParams=r,e.getLastMailSuggestParams=n}(rrLibrary),function(e,t){!e.isRobot&&e.areCookiesEnabled&&rrApi._initialize.subscribe(function(r){if(r){var n=window.rrPartnerUserId||"";t.setOnRoot(e.lastPartnerUserIdCookieName,n,e.daysToSecond(365))}})}(rrLibrary,retailrocket.cookies),function(e,t){!e.isRobot&&e.areCookiesEnabled&&rrApi._initialize.subscribe(function(r){function n(r,n){var i=[];t.get(e.lastAddedBasketCookiName)&&(i=t.get(e.lastAddedBasketCookiName).split(",")),i.length>9&&i.shift(),i.push(r.toString()),t.setOnRoot(e.lastAddedBasketCookiName,i.join(","),3600)}r&&(rrApi.view.subscribe(function(r,n){var i=[];t.get(e.lastViewedCookiName)&&(i=t.get(e.lastViewedCookiName).split(",")),i.length>9&&i.shift(),i.indexOf(r.toString())<0&&i.push(r),t.setOnRoot(e.lastViewedCookiName,i.join(","),3600)}),rrApi.addToBasket.subscribe(n),rrApi.recomAddToCart.subscribe(n),rrApi.order.subscribe(function(){t.setOnRoot(e.lastAddedBasketCookiName,null,-1),t.setOnRoot(e.lastViewedCookiName,null,-1)}))})}(rrLibrary,retailrocket.cookies),function(e,t){function r(e){var t=e.split(".");return t=t.slice(t.length-2),t.join(".")}function n(){if(!document.referrer)return!1;var t=r(e.urlParse(document.referrer).hostname),n=r(document.location.hostname);return t!=n}!e.isRobot&&e.areCookiesEnabled&&rrApi._initialize.subscribe(function(r){r&&rrApi.pageView.subscribe(function(){var r=e.getQueryParametr("rr_mailid"),i=e.getQueryParametr("utm_source"),a=e.getQueryParametr("rr_urlType"),o=t.getPartnerId();r&&e.trackEvent.send("emailclick",o,r,{rr_mailid:r,utm_source:i,rr_urlType:a},"rrApi._empty"),((n()||i&&i!=e.getCookie(e.utmSourceCookieName))&&1!=e.getQueryParametr("utm_nooverride")||e.getQueryParametr("gclid"))&&(e.setCookie(e.mailTrackingIdCookieName,null,-1),e.setCookie(e.utmSourceCookieName,null,-1)),r&&(e.setCookie(e.mailTrackingIdCookieName,r,e.daysToSecond(182)),e.setCookie(e.utmSourceCookieName,i,e.daysToSecond(182)))})})}(rrLibrary,retailrocket.api),function Widgets(rrLibrary,retailrocketApi){function inArray(e,t){if(!e)return!1;for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1}function addToCookieExceptItem(e,t,r){var n=new Date;getExceptedItemsIdFromCookie(e),n.setDate((new Date).getDate()+r);var i="rr-"+n.getDate()+n.getMonth()+"-"+e,a=rrLibrary.getCookie(i)||"";t=t.concat(a?a.split(","):[]),rrLibrary.setCookie(i,t.join(","),rrLibrary.daysToSecond(r))}function getExceptedItemsIdFromCookie(e){for(var t=document.cookie.split(";"),r=new RegExp("\\s*rr-\\d+-"+e+"=(.+)"),n=[],i=0;i<t.length;++i){
var a=r.exec(t[i]);a&&a.length>1&&(n=n.concat(unescape(a[1]).split(",")))}return n}function showPopupWidget(e,t){if("undefined"==typeof window.disablePopupWidget&&"showAll"==testParams.segment&&e&&e.PopupWidgetId&&inArray(e.ActiveWidgetIds,e.PopupWidgetId)&&e.YmlStatus!==!1&&!(window.screen.availHeight<720)){var r=getExceptedItemsIdFromCookie(e.PartnerId);$("#rrPopupWidgetFrame").attr("src","//api.retailrocket.ru/Frontend/PopupWidget?partnerId="+e.PartnerId+"&widgetId="+e.PopupWidgetId+"&itemId="+t+"&exceptItems="+r.join(",")+"&session="+e.RrSessionId+"&pvid="+retailrocketApi.getPartnerVisitorId()),setTimeout(function(){$("#rrFade").css("display","block"),$("#rrPopupWidgetPopUp").show()},100)}}function initCardAndCategoryWidget(e,t){for(var r=$(".rr-widget"),n=getExceptedItemsIdFromCookie(e),i=0;i<r.length;++i){var a=$(r[i]);if(!(a.children().length>0)){var o=null,s=null,d=null;"undefined"==typeof window.disableCardWidget&&(o=a.data("rr-widget-product-id")||a.attr("data-rr-widget-product-id")),"undefined"==typeof window.disableCategoryWidget&&(s=parseInt(a.data("rr-widget-category-id")||a.attr("data-rr-widget-category-id"))),"undefined"==typeof window.disableCartWidget&&(d=a.data("rr-widget-products-id")||a.attr("data-rr-widget-products-id"));var c=a.data("rr-widget-id")||a.attr("data-rr-widget-id"),u=a.data("rr-widget-type")||a.attr("data-rr-widget-type"),l=a.data("rr-search-keyword")||a.attr("data-rr-search-keyword"),p=a.data("rr-widget-width")||a.attr("data-rr-widget-width"),m=a.data("rr-crosssell")||a.attr("data-rr-crosssell"),g=n.join(",")+(a.data("except-items")||a.attr("data-except-items")||""),f=a.data("include-items")||a.attr("data-include-items");if((o||s||d||"search"==u||"main-page"==u||"personal"==u)&&c&&t.ActiveWidgetIds&&inArray(t.ActiveWidgetIds,c)){var v=$('<iframe frameborder="0" scrolling="no"/>'),b="rc-iframe-"+i;v.attr("name",b).attr("id",b),v.css("border","0px"),v.css("width",p),v.css("height","0px"),v.css("overflow","hidden"),"showAll"!=testParams.segment&&(v.hide(),v.css("height","0px")),function(e,t){e.load(function(){pm.bind(t,function(t){rrLibrary.executeSubscribers(window.rrWidgetInitCallbacks||[],[a,t]),t&&t.length||e.hide()}),pm({target:window.frames[t],type:"register",data:{frameId:t},url:e[0].contentWindow?e[0].contentWindow.location:""})})}(v,b);var h="//api.retailrocket.ru/Frontend/";"search"==u&&(h+="SearchWidget?&widgetId="+c+"&referer="+encodeURIComponent(document.referrer)+"&pageurl="+encodeURIComponent(window.location)+"&keyword="+encodeURIComponent(l||"")),"cart"==u?h+="CartWidget?widgetId="+c+"&itemId="+(d||o)+"&version="+m||"":"forNotAvailableItem"==u?h+="WidgetForNotAvailableItem?widgetId="+c+"&itemId="+(d||o):"personal"==u?h+="PersonalWidget?widgetId="+c:"accessories"==u?h+="AccessoriesWidget?widgetId="+c+"&itemId="+(d||o):o||d?h+="CardWidget?widgetId="+c+"&itemId="+(d||o)+"&propWeight="+("paramsWeight"==testParams.marginSegment?"true":"false"):0==s||"main-page"==u?h+="MainPageWidget?widgetId="+c+"&categoryId=0":s&&(h+="CategoryWidget?widgetId="+c+"&categoryId="+s),h+="&exceptItems="+(g||"")+"&includeItems="+(f||"");var y=rrLibrary.getCookie("rcuid");if(h+="&session="+y,h+="&partnerId="+t.PartnerId,h+="&partnerUserId="+(rrLibrary.getCookie(rrLibrary.lastPartnerUserIdCookieName)||""),h+="&pvid="+retailrocketApi.getPartnerVisitorId(),"52244a770d422d1e14ad5578"==t.PartnerId)if("T"==testSegment)h+="&revolver=true";else if("cart"==u)return;if(1==testSegment&&"52a96923ec92e6007847bca9"==t.PartnerId&&(h+="&personalized=true"),1==testSegment&&("547b6cd01e9947189044b2e1"==t.PartnerId||"513860d387900a11488ad078"==t.PartnerId||"53c631e26636b12d603427a0"==t.PartnerId))return;v.attr("src",h),a.append(v)}}}}function hidePopupWidget(){$("#rrFade").hide(),$("#rrPopupWidgetPopUp").hide(),$("#rrPopupWidgetFrame").attr("src","about:blank"),$("#rrPopupWidgetFrame").hide()}if(!rrLibrary.isRobot&&rrLibrary.areCookiesEnabled){var cookieNameRecomItemId="rr-RecomItemId",cookieNameAlg="rr-Alg",cookieNameRecomWidgetName="rr-RecomWidgetName",cookieNameMethodName="rr-MethodName",testSegment,$=window.jQuery;if($){var testParams={segment:"showAll"},initPopupWidget=function(){var e="<div id='rrFade' style='display:none;position:fixed; top:0; bottom:0; right:0; left:0; z-index:9999; background-color:black; opacity:0.4; filter:alpha(opacity=50);'></div>",t="rrPopupWidgetFrame",r="<div id='rrPopupWidgetPopUp' style='display: none; background: #fff; padding: 10px 19px 10px 20px; border: 10px solid #ddd; float: left; font-size: 1.2em; position: fixed; top: 50%; left: 50%; z-index: 99999; -webkit-box-shadow: 0px 0px 20px #000; -moz-box-shadow: 0px 0px 20px #000; box-shadow: 0px 0px 20px #000; -webkit-border-radius: 10px; -moz-border-radius: 10px; margin-left: -350px; margin-top: -150px; border-radius: 10px;width: 690px;overflow: hidden;height: 200px;'>"+'<a href="javascript: void(0)" class="close" style="z-index: 9999; position: absolute;right: 15px;"><img id="rrPopupWidgetCloseBtn" src="//cdn.retailrocket.ru/Content/img/close_pop.png" class="btn_close" title="Close Window" style="float: right; margin: -9px -15px 0 0;" alt="Close" /></a><img src=\'//cdn.retailrocket.ru/Content/img/load.gif\' style=\'position:absolute;left:50%;top:50%;margin-left:-33px;margin-top:-33px;\' /><iframe id=\''+t+"' name='"+t+"'frameborder='0' scrolling='no'style='border:0px;width:690px;height:640px;overflow:hidden;position:absolute;display:none;left:20px;top:10px;'></iframe></div>";$("body").append($(e)).append($(r)),$("#rrFade").click(hidePopupWidget),$("#rrPopupWidgetCloseBtn").click(hidePopupWidget);var n=$("#"+t);n.load(function(){pm.bind(t,function(e){if(e&&e.length){var t=$("#rrPopupWidgetPopUp");t.css("height","605px"),t.css("margin-top","-300px")}else(window._gaq||[]).push(["_trackEvent","RetailRocket","RecsMissing","A/B Test",0,!0]);n.show()}),pm({target:window.frames[t],type:"register",data:{frameId:t,height:"320px"},url:n[0].contentWindow?n[0].contentWindow.location:""})})};rrApi.initWidgets=function(){};var initWidgets=function(e,t){initPopupWidget(),initCardAndCategoryWidget(e,t)};rrApi._initialize.subscribe(function(partnerParams){if(partnerParams){pm.bind("widgetHeight",function(e){$("#"+e.frameId).height(e.height||0),"rrPopupWidgetFrame"==e.frameId&&$("#rrPopupWidgetPopUp").height(e.height+5)}),pm.bind("addToBasket",function(e){rcApi.recomAddToBasket(e.itemId,e.dontShowPopup,e.reloadPageOnAddedComplete,e.alg,null,e.widgetName,e.methodName)}),pm.bind("widgetRecomMouseDown",function(e){rrApi.recomMouseDown(e.itemId,{suggester:e.widgetName,methodName:e.methodName,alg:e.alg})}),pm.bind("closePopupRecomWidget",function(){hidePopupWidget()});var partnerId=window.rrPartnerId;"52a96923ec92e6007847bca9"==partnerId&&(testSegment=retailrocket.segmentator.getVisitorSegment(2),rrLibrary.trackEvent.permanentEventParams.abtest="personalAB_20150522_lascana"+testSegment),"5423bad91e994428b4dfa945"==partnerId&&(testSegment=retailrocket.segmentator.getVisitorSegment(2),rrLibrary.trackEvent.permanentEventParams.abtest="personalAA_20150214_pleer"+testSegment),"513860d387900a11488ad078"==partnerId&&(testSegment=retailrocket.segmentator.getVisitorSegment(2),rrLibrary.trackEvent.permanentEventParams.abtest="personalAA_20150403_fotololo"+testSegment),"547b6cd01e9947189044b2e1"==partnerId&&(testSegment=retailrocket.segmentator.getVisitorSegment(10),rrLibrary.trackEvent.permanentEventParams.abtest="profiled_20150313_tekstil-vsem"+testSegment==1?1:2),"513860d387900a11488ad078"==partnerId&&(testSegment=retailrocket.segmentator.getVisitorSegment(10),rrLibrary.trackEvent.permanentEventParams.abtest="profiled_20150313_fotololo"+testSegment==1?1:2),"53c631e26636b12d603427a0"==partnerId&&(testSegment=retailrocket.segmentator.getVisitorSegment(10),rrLibrary.trackEvent.permanentEventParams.abtest="profiled_20150313_eurosuvenir"+testSegment==1?1:2),"52244a770d422d1e14ad5578"==partnerId&&(testSegment=retailrocket.segmentator.getPseudoNamedSegment({T:1,C1:1,C2:1}),rrLibrary.trackEvent.permanentEventParams.abtest="revolver_20150724_fabika"+testSegment);var recomItemId=rrLibrary.getCookie(cookieNameRecomItemId);recomItemId&&(rrLibrary.trackEvent.permanentEventParams.recomItemId=recomItemId,rrLibrary.trackEvent.permanentEventParams.alg=rrLibrary.getCookie(cookieNameAlg),rrLibrary.trackEvent.permanentEventParams.recomWidgetName=rrLibrary.getCookie(cookieNameRecomWidgetName),rrLibrary.trackEvent.permanentEventParams.methodName=rrLibrary.getCookie(cookieNameMethodName));try{var script="rrClientAddToBasket = (function(itemId, rrCallback) {";script+=partnerParams.AddToBasketClientJsCode||"",script+="})",eval(script)}catch(exc){console.log(exc)}rrApi.initWidgets=function(){initCardAndCategoryWidget(partnerId,partnerParams)},rrApi.pageView.subscribe(function(){initWidgets(partnerId,partnerParams),rrApi.recomAddToBasket.subscribe(function(e,t,r,n,i,a,o){return partnerParams?(rrClientAddToBasket(e,function(){r&&window.location.reload()}),addToCookieExceptItem(partnerId,[e],1),rrApi.recomAddToCart(e,{alg:n,userId:i,recomWidgetName:a,methodName:o}),t||showPopupWidget(partnerParams,e),!0):!0}),rrApi.addToBasket.subscribe(function(e,t,r){addToCookieExceptItem(partnerId,[e],1),r||showPopupWidget(partnerParams,e)})})}})}}}(rrLibrary,retailrocket.api),function(e){!e.isRobot&&e.areCookiesEnabled&&window.addEventListener&&window.addEventListener("message",function(e){var t={from:"",type:""};try{t=JSON.parse(e.data)||{}}catch(e){}"rr"==t.from&&"setEmail"==t.type&&rrApiOnReady.push(function(){rrApi.setEmail(t.data.email,t.data.emailData)})})}(rrLibrary),function(e){rrApi.setKeywords.subscribe(function(t){e.trackEvent.permanentEventParams.keywords=t})}(rrLibrary),function(e,t,r){if(!e.isRobot&&e.areCookiesEnabled){var n,i="rrApiParam";if(!t.getElementById(i)){var a=(new Date).getTime()+""+Math.random(),o=t.getElementsByTagName("script")[0];n=t.createElement("script"),n.id=i,n.async=!0,n.type="text/javascript",n.src="//api.retailrocket.ru/api/1.0/PartnerApiParams/"+r+"/jsonp?callback=rrApi._initialize&rrnocache="+a,o.parentNode.insertBefore(n,o)}}}(rrLibrary,document,window.rrPartnerId),function(e,t){var r=!1,n=!0,i=e.document,a=i.documentElement,o=i.addEventListener?"addEventListener":"attachEvent",s=i.addEventListener?"removeEventListener":"detachEvent",d=i.addEventListener?"":"on",c=function(n){var a=n.type||"";("readystatechange"!=a||"complete"==i.readyState)&&(("load"==a?e:i)[s](d+a,c,!1),r||(r=!0,setTimeout(function(){t.call(e,a||n)})))},u=function(){try{a.doScroll("left")}catch(e){return void setTimeout(u,50)}c("poll")};if("complete"==i.readyState)t.call(e,"lazy");else{if(i.createEventObject&&a.doScroll){try{n=!e.frameElement}catch(l){}n&&u()}i[o](d+"DOMContentLoaded",c,!1),i[o](d+"readystatechange",c,!1),e[o](d+"load",c,!1)}}(window,function(){rrApiOnReady.push(rrApi.pageView)}),retailrocket.setModule("localEvents",["utils"],function(e){function t(){try{return JSON.parse(localStorage.getItem(u))||[]}catch(e){return[]}}function r(e,r){var n=t();return e&&(n=n.filter(function(t){return e.indexOf(t.ev)>=0})),r&&(n=n.filter(function(e){return e.ts>r})),n}function n(t){var n=r(["view"],t),i=n.map(function(e){return e.dt.id});return e.uniq(i)}function i(t){var n=r(["order"],t),i=n.map(function(e){return e.dt.id});return e.uniq(i)}function a(e){var t={};return e.forEach(function(e){var r=e.dt.id,n=parseInt(t[r],10);isNaN(n)&&(n=0),"addToBasket"==e.ev||"recomAddToCart"==e.ev?t[r]=n+1:(n-=1,1>n?delete t[r]:t[r]=n)}),t}function o(t){var n=r(["addToBasket","recomAddToCart","removeFromBasket"],t);return e.getAllKeys(a(n))}function s(e){var t=r(["search"],e);return t.length>0?t[t.length-1].dt:null}function d(){var e=r(["mailrequest"],0);return e.length<1?0:e[e.length-1].ts}function c(){var e=t();return e.length<1?0:e[e.length-1].ts}var u="retailRocketEvents";return{getViewedProductIds:n,getOrderedProductIds:i,getBasketProductIds:o,getLastEventTimestamp:c,getLastSearchPhrase:s,getLastMailRequestTimestamp:d,useNs:!0}}),retailrocket.setModule("exitIntendWidget",["document","utils","api","cookies"],function($document,utils,api,cookies){function showWidget(widget){stillHaveToHide=!1,isWidgetOpen(widget)||"false"==widget.getAttribute("active")||cookies.get(forceClosedFlagCookieName)||(widget.className+=" active",showEvent.publish({}),function emitOnShow(){eval(widget.getAttribute("data-on-show"))}.apply(widget))}function hideWidget(e){stillHaveToHide=!0,setTimeout(function(){stillHaveToHide&&(e.className=e.className.replace(/\bactive\b/g,"").trim())},50)}function isWidgetOpen(e){return e.className.indexOf("active")>=0}function close(e){e&&cookies.set(forceClosedFlagCookieName,!0,2592e3,"/"),hideWidget(exitIntendElem)}function initialize(){exitIntendElem=utils.getElementsByClassName("retailrocket-notify-widget")[0]||utils.getElementsByClassName("retailrocket-exit-intend")[0],exitIntendElem&&!exitIntendElem.getAttribute("initialized")&&(exitIntendElem.setAttribute("initialized","true"),$document.documentElement.addEventListener("mouseleave",function(e){e.clientY>20||showWidget(exitIntendElem)}),exitIntendElem.addEventListener("click",function(e){e.stopPropagation(),window.event&&window.event.cancelBubble&&(window.event.cancelBubble=!0)}),$document.documentElement.addEventListener("click",function(){close(!1)}),$document.addEventListener("keydown",function(e){27==e.keyCode&&close(!1)}),exitIntendElem.addEventListener("mouseleave",function(e){close(!1)}),exitIntendElem.addEventListener("mouseover",function(e){showWidget(exitIntendElem)}))}function isContainsElement(e){return exitIntendElem?exitIntendElem.contains(e):!1}var forceClosedFlagCookieName="rreiwfc",exitIntendElem=null,stillHaveToHide=!1,showEvent=utils.createEventProperty();return initialize(),api.pushTrackingCall(function(e){e.pageView.subscribe(initialize)}),{initialize:initialize,showEvent:showEvent,isContainsElement:isContainsElement,close:close,useNs:!0}}),retailrocket.setModule("widget",["ns","recommendation","items","utils","localEvents","api","exitIntendWidget","cookies"],function(ns,recommendationApi,itemsApi,utils,localEvents,api,exitIntendWidget,cookies){function templateRender(e,t,r,n){var i=utils.plainCopy(n);t=t||[],e.innerHTML="",i.recommendations=i.items=t,i.numberOfItems=(i.numberOfItems||0)>=t.length?t.length:i.numberOfItems,e.setAttribute("data-number-of-rendered-items",i.numberOfItems),e.setAttribute("data-rendered-items-ids",t.slice(0,i.numberOfItems).map(function(e){return e.ItemId}).join(",")),i.numberOfItems&&(e.innerHTML=tmpl(r,i))}function getRecomsByLocalEvents(e,t,r){var n=localEvents.getLastMailRequestTimestamp(),i=localEvents.getOrderedProductIds(n);if(i.length>0)return t.isPostransactionMailTemplateReady?void recommendationApi.forProducts(e,i,"related",{version:1},function(e){r(e,"related",t.headerTextOrdered)}):void r([],"");var a=localEvents.getBasketProductIds(n);if(a.length>0)return t.isBasketMailTemplateReady?void itemsApi.get(e,a,function(e){r(e,"basket",t.headerTextBasket)}):void r([],"");var o=localEvents.getViewedProductIds(n);if(o.length>0&&t.isViewedMailTemplateReady)return t.isViewedMailTemplateReady?void itemsApi.get(e,o,function(e){var n=!0;for(var i in e)1==e[i].IsAvailable&&(n=!1);n&&t.isViewedNaMailTemplateReady?r(e,"viewedna",t.headerTextViewedNa):r(e,"viewed",t.headerTextViewed)}):void r([],"");var s=localEvents.getLastSearchPhrase(n);return null!=s?void recommendationApi.forSearch(e,s,{},function(e){r(e,"search",t.headerTextSearched)}):void r([],"")}function sendWidgetView(e){var t=e.getAttribute("data-rendered-list-type");t&&api.pushTrackingCall(function(){rrApi.mailRequestFormView({requestType:t})})}function buildPreRenderDelegate(context,preRenderStr){return preRenderStr?function(data,renderFn){(function(){eval(preRenderStr)}).apply(context)}:function(e,t){t(e)}}function buildPostRenderDelegate(context,postRenderStr){return function(){(function(){eval(postRenderStr)}).apply(context)}}function algorithmTypeByAlgorithm(e){switch(e){case"alternative":case"related":case"accessories":return"product";case"popular":case"latest":return"category";case"search":return"search";case"personal":return"personal";case"mailrequest":case"interacted-items":return"mailrequest";default:throw"algorithmTypeByAlgorithm: argument excpetion"}}function toCamelStyle(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}function getParamsFromAttribe(e,t){for(var r=e.attributes,n={},i=0;i<r.length;i++){var a=r[i];if(0==a.nodeName.indexOf(t)){var o=toCamelStyle(a.nodeName.replace(t+"-",""));n[o]=a.nodeValue}}return n}function getAlgorithmParams(e){var t=getParamsFromAttribe(e,"data-algorithm-param");return t.version=t.version||e.getAttribute("data-algorithm-ver"),t}function getTemplateParams(e){var t=getParamsFromAttribe(e,"data-template-param");return t.onAddToBasket=e.getAttribute("data-item-add-to-basket-action"),t.suggesterId=t.suggesterId||e.getAttribute("data-suggester-id")||"widget",t.numberOfItems=t.numberOfItems||e.getAttribute("data-number-of-items"),t.headerText=t.headerText||e.getAttribute("data-header-text"),t.itemImageWidth=t.itemImageWidth||e.getAttribute("data-image-width")||170,t.itemImageHeight=t.itemImageHeight||e.getAttribute("data-image-height")||170,t.headerTextViewed=t.headerTextViewed||e.getAttribute("data-header-text-viewed")||e.getAttribute("data-header-text")||t.headerText,t.headerTextViewedNa=t.headerTextViewedNa||e.getAttribute("data-header-text-viewedna")||e.getAttribute("data-header-text")||t.headerText,t.headerTextBasket=t.headerTextBasket||e.getAttribute("data-header-text-basket")||e.getAttribute("data-header-text")||t.headerText,t.headerTextOrdered=t.headerTextOrdered||e.getAttribute("data-header-text-ordered")||e.getAttribute("data-header-text")||t.headerText,t.headerTextSearched=t.headerTextSearched||e.getAttribute("data-header-text-searched")||e.getAttribute("data-header-text")||t.headerText,t.isViewedNaMailTemplateReady="true"==t.isViewedNaMailTemplateReady||"true"==e.getAttribute("data-viewedna-mail-template-ready"),t.isViewedMailTemplateReady=!e.getAttribute("data-viewed-mail-template-ready")||"true"==e.getAttribute("data-viewed-mail-template-ready"),t.isBasketMailTemplateReady=!e.getAttribute("data-basket-mail-template-ready")||"true"==e.getAttribute("data-basket-mail-template-ready"),t.isPostransactionMailTemplateReady=!e.getAttribute("data-posttransaction-mail-template-ready")||"true"==e.getAttribute("data-posttransaction-mail-template-ready"),t}function renderWidget(e){var t=api.getPartnerId();if(t&&"undefined"!=t){var r=-1;if(!e.getAttribute("data-widget-applied")){e.setAttribute("data-widget-applied",!0);var n=e.getAttribute("data-algorithm-type"),i=e.getAttribute("data-algorithm"),a=e.getAttribute("data-template-container-id"),o=a?document.getElementById(a).innerText||document.getElementById(a).textContent||document.getElementById(a).innerHTML:defaultHtmlTemplate;exitIntendWidget.isContainsElement(e)&&exitIntendWidget.showEvent.subscribe(function(){sendWidgetView(e)}),"interacted-items"!=i||e.getAttribute("data-on-update")||e.setAttribute("data-on-update",'Number(this.getAttribute("data-number-of-rendered-items")) ? this.parentElement.style.display = "block": this.parentElement.style.display = "none"');var s=buildPreRenderDelegate(e,e.getAttribute("data-on-pre-render")),d=buildPostRenderDelegate(e,e.getAttribute("data-on-update")||e.getAttribute("data-on-post-render")),c=getTemplateParams(e)||{};c.partnerId=t,c.algorithm=i;var u=getAlgorithmParams(e)||{};switch(n=n||algorithmTypeByAlgorithm(i)){case"product":recommendationApi.forProducts(t,(e.getAttribute("data-algorithm-argument")||e.getAttribute("data-item-id")).split(","),i,u,function(t){s(t,function(t){templateRender(e,t,o,c),d()})});break;case"category":recommendationApi.forCategories(t,(e.getAttribute("data-algorithm-argument")||e.getAttribute("data-category-id")).split(","),i,u,function(t){s(t,function(t){templateRender(e,t,o,c),d()})});break;case"search":recommendationApi.forSearch(t,e.getAttribute("data-algorithm-argument")||e.getAttribute("data-search-phrase"),u,function(t){s(t,function(t){templateRender(e,t,o,c),d()})});break;case"personal":recommendationApi.forPerson(t,api.getSessionId(),e.getAttribute("data-partner-user-id"),u,function(t){s(t,function(t){templateRender(e,t,o,c),d()})});break;case"mailrequest":var l=utils.plainCopy(c);setInterval(function(){var n=localEvents.getLastEventTimestamp();r!=n&&(getRecomsByLocalEvents(t,l,function(t,r,n){l.headerText=n,e.setAttribute("data-rendered-list-type",r),s(t,function(t){templateRender(e,t,o,l),d()})}),r=n)},1e3);break;case"visitor-category-interest":recommendationApi.forVisitorCategoryInterest(t,api.getSessionId(),i,u,function(t){s(t,function(t){templateRender(e,t,o,c),d()})});break;default:return}}}}function renderAll(){var e=utils.getElementsByClassName("retailrocket-widget");e.length>0&&!cssHasBeenAdded&&(cssHasBeenAdded=!0,utils.registerCss("//cdn.retailrocket.ru/content/css/retailrocket.widget.css"));for(var t=0;t<e.length;++t)renderWidget(e[t])}function click(e,t,r){api.pushTrackingCall(function(n){n.recomMouseDown(e,{suggester:t,methodName:r})})}function hideProduct(e){var t=utils.getContainerByClass(e,"retailrocket-item");t&&(t.style.display="none")}var defaultHtmlTemplate='<header class="retailrocket-widgettitle"><%=headerText%><% if (typeof subHeaderText !== "undefined") { %>    <small><%=subHeaderText %></small><% } %></header><ul class="retailrocket-items">    <% for (var i = 0 ; i < numberOfItems; ++i) with(items[i]) { %>        <li class="retailrocket-item" style="width:<%=itemImageWidth%>px;">            <a class="retailrocket-item-info" href="<%=Url%>" onmousedown=\'retailrocket.widget.click(<%=ItemId%>,"<%=suggesterId%>","<%=algorithm%>") \'>                <div class="retailrocket-item-image">                    <img onerror="retailrocket.widget.hideProduct(this)" src="//cdn.retailrocket.ru/api/1.0/partner/<%=partnerId%>/item/<%=ItemId%>/picture/?format=png&width=<%=itemImageWidth%>&height=<%=itemImageHeight%>&scale=both" style="width:<%=itemImageWidth%>px;height:<%=itemImageHeight%>px"></div>                <div class="retailrocket-item-brand">                    <%=Vendor %>                </div>                <div class="retailrocket-item-title">                    <%=Name %>                </div>                <div class="retailrocket-item-description">                    <%=Description %>                </div>            </a>            <div class="retailrocket-item-price"> <span class="retailrocket-item-price-value"><%= Price %></span> <span class="retailrocket-item-price-currency"></span> </div>            <nav class="retailrocket-actions">                <a class="retailrocket-actions-more" href="<%=Url%>"></a>                <a class="retailrocket-actions-buy" href="<%=Url%>" onclick=\'return retailrocket._widgetAddToBasket("<%=ItemId%>", "<%=onAddToBasket%>")\'></a>            </nav>        </li>   <% } %></ul>',tmpl=function(){var e={};return function t(r,n){var i=/\W/.test(r)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+r.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):e[r]=e[r]||t(document.getElementById(r).innerHTML);return n?i(n):i}}();ns._widgetAddToBasket=function(itemId,callbackName){return eval(callbackName+"('"+itemId+"')")};var cssHasBeenAdded=!1;return api.getPartnerId()&&api.getSessionId()&&"527a338aec92e6106859030b"!=api.getPartnerId()&&renderAll(),api.pushTrackingCall(function(e){e.pageView.subscribe(renderAll)}),{hideProduct:hideProduct,render:renderAll,click:click,useNs:!0}}),retailrocket.setModule("deactivateIfAgreedToReceiveMarketingMail",["visitor","utils","api","cookies"],function(e,t,r,n){function i(){return t.getElementsByClassName("deactivate-if-visitor-agreed-to-receive-marketing-mail")}function a(e){for(var t=i(),r=0;r<t.length;++r)t[r].setAttribute("active",e)}function o(){var o=r.getSessionId(),c=i();return o&&0!=c.length?(t.getElementsByClassName("deactivate-if-visitor-agreed-to-receive-marketing-mail"),"true"==n.get(s)&&"true"==n.get(d)?void a(!1):void e.get(r.getPartnerId(),o,function(e){var t="true"==(e.HasEmail||"").toString(),r="true"==(e.IsAgreedToReceiveMarketingMail||"").toString();n.set(s,t),n.set(d,r),a(!t||!r)})):void 0}var s="rrhe",d="rraem";return a(!1),r.getPartnerId()&&r.getSessionId()&&o(),r.pushTrackingCall(function(e){e.pageView.subscribe(o)}),{initialize:o,useNs:!0}}),retailrocket.setModule("mailRequestForm",["utils","document","api","exitIntendWidget"],function(e,t,r,n){function i(){for(var e=d.getElementsByClassName("data-custom-email-attribute"),t={},r=0;r<e.length;r++){var n=e[r];t[n.name]=n.value}return t}function a(){var e={email:null,isAgreeToGetTriggerEmail:!1,listType:null,itemsId:[]};return e.email=u.value,p&&(e.isAgreeToGetTriggerEmail=p.checked),c&&c.getAttribute("data-rendered-items-ids")&&(e.itemsId=c.getAttribute("data-rendered-items-ids").split(","),e.listType=c.getAttribute("data-rendered-list-type")),e.customData=i(),e}function o(){var t=a(d);e.isValidEmail(t.email)&&(r.pushTrackingCall(function(){rrApi.mailRequest(t.email,r.getSessionId(),t.listType,t.itemsId,t.isAgreeToGetTriggerEmail,t.customData)}),n.isContainsElement(d)&&n.close(t.isAgreeToGetTriggerEmail))}function s(){d=e.getElementsByClassName("retailrocket-mailrequest-form")[0],d&&!d.getAttribute("initialized")&&(d.setAttribute("initialized","true"),c=t.getElementById(d.getAttribute("data-product-to-send-widget-id")),u=t.getElementById(d.getAttribute("data-email-input-id")),p=t.getElementById(d.getAttribute("data-subscribe-on-trigger-email-checkbox-id")),l=t.getElementById(d.getAttribute("data-send-btn-id")),l.addEventListener("click",function(){o()}),u.addEventListener("keydown",function(e){13==e.keyCode&&o()}))}var d,c,u,l,p;return s(),r.pushTrackingCall(function(e){e.pageView.subscribe(s)}),{initialize:s,useNs:!0}}),retailrocket.setModule("subscribeOnInteractedItemsWidget",["utils","exitIntendWidget","api","document","cookies"],function(e,t,r,n,i){function a(){for(var t=e.getElementsByClassName("retailrocket-widget"),r=0;r<t.length;++r)if("interacted-items"==t[r].getAttribute("data-algorithm"))return t[r];return null}function o(t){var o=a();if(o&&o.getAttribute("data-rendered-items-ids")){var d=o.getAttribute("data-rendered-items-ids").split(","),c=o.getAttribute("data-rendered-list-type"),u=n.getElementById(t).value;if(!e.isValidEmail(u))return;r.pushTrackingCall(function(){rrApi.mailRequest(u,r.getSessionId(),c,d,!0,{})}),s(!0),i.set(rrLibrary.lastAddedBasketCookiName,null,-1),i.set(rrLibrary.lastViewedCookiName,null,-1),r.pushTrackingCall(function(){rrApi.setEmail(u)})}}function s(e){t.close(e)}return{_subscribe:o,close:s,useNs:!0}}),retailrocket.setModule("timing",["cors","api"],function(e,t){function r(t,r){e.make(a,"POST",[{name:"Content-type",value:"application/json"}],t,r,function(){})}function n(){for(var e=[],t=window.performance.getEntries(),s=0;s<t.length;++s){var d=t[s],c=d.name?d.name.toLowerCase():null,u=Math.round(d.duration),l=c&&c.indexOf(".retailrocket.ru/")>-1&&c.indexOf(a)<0&&u>0&&!(c in o);l&&e.push({Url:c,Ms:u})}e.length>0?r(JSON.stringify(e),function(){for(var t=0;t<e.length;++t)o[e[t].Url]=!0;setTimeout(n,i)}):setTimeout(n,i)}var i=1e3,a="//api.retailrocket.ru/api/1.0/timing/",o={};return window.performance&&window.performance.getEntries&&t.pushTrackingCall(function(e){e.pageView.subscribe(function(){setTimeout(n,i)})}),{}}),retailrocket.setModule("markup",["utils","api","jsonp"],function(e,t,r){function n(n){var i={blockId:n.getAttribute(a),pvid:t.getPartnerVisitorId(),partnerId:t.getPartnerId()};r.run(t.cdnUrl("/markupblocks/?"+e.objToQueryString(i)),function(e){if(e&&e.Markup){for(var t,r=e.Markup,i=n.attributes,a=0,o=i.length;o>a;a++)t=i[a],r=r.replace(new RegExp("{{"+t.nodeName+"}}","gi"),t.nodeValue);n.innerHTML=r,[].forEach.call(n.querySelectorAll("script"),function(e){e&&e.type&&"text/javascript"!=e.type||eval.apply(window,[e.text])})}})}function i(){e.$forall("div["+a+"]",n)}var a="data-retailrocket-markup-block";return i(),document.addEventListener("DOMContentLoaded",function(e){i()}),{}})}catch(exc){}
//# sourceMappingURL=api.js.map
